var ASB=(function(c,f){function e(a,k,j){this.options=f.extend({},j||{});this.frequency=(this.options.frequency||30);this.decay=this.options.decay=(this.options.decay||1);this.container=f("#"+a).children("tbody");this.options.url=k;this.options.complete=f.proxy(this.updateComplete,this);this.phpTimeDiff=Math.floor(this.options.data.dateline-(new Date().getTime()/1000));this.start()}function i(){this.timer=setTimeout(f.proxy(this.onTimerEvent,this),(this.decay*this.frequency)*1000)}function d(){clearTimeout(this.timer)}function h(a){if(a.responseText&&a.responseText!="nochange"){this.decay=this.options.decay;this.container.html(a.responseText)}else{this.decay=this.decay*this.options.decay}this.options.data.dateline=Math.floor(new Date().getTime()/1000+this.phpTimeDiff);this.timer=setTimeout(f.proxy(this.onTimerEvent,this),(this.decay*this.frequency)*1000)}function g(){if(this.container.width()<=0&&this.container.height()<=0){this.timer=setTimeout(f.proxy(this.onTimerEvent,this),(this.decay*this.frequency)*1000);return}f.ajax(this.options)}e.prototype={start:i,stop:d,updateComplete:h,onTimerEvent:g};function b(m,l,a){if(m.length==0){return}var n="",k=0;for(var j=0;j<m.length;j++){n=m[j].addon+"_main_"+m[j].id;if(!f("#"+n)){continue}k=l.left;if(m[j].position){k=l.right}new e(n,"xmlhttp.php",{type:"get",data:{action:"asb",id:m[j].id,addon:m[j].addon,dateline:m[j].dateline,width:k,script:a},frequency:m[j].rate})}}c.ajax={buildUpdaters:b};return c})(ASB||{},jQuery);